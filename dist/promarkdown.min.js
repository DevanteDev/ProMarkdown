!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):(t=t||self).ProMarkdown=e(t.React)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;class e{constructor(t,e){this.regex=t,this.autoClose=e,this.children=[]}parse(t){var e=this.regex.exec(t);if(e)return this.content=this.autoClose?e[0]:e[1],this.begin=e.index,this.end=this.begin+e[0].length,this.afterMatch&&this.afterMatch(e),!0}}class s extends e{constructor(t){super(/.+\n?/g,!0),t&&(this.content=t)}toHTML(){return this.content}toReact(){return this.content}}class r{constructor(){this.TAGS=[]}register(t){this.TAGS.push(t)}unregister(t){this.TAGS.remove(t)}parse(t){var e,r=[];if(t.length<1)return[];for(e of this.TAGS)if((e=new e.constructor).parse(t)){r.push(...this.parse(t.substring(0,e.begin))),e.autoClose||(e.children=this.parse(e.content)),r.push(e),r.push(...this.parse(t.substring(e.end,t.length)));break}return r.length?r:[new s(t)]}static toHTML(t){var e,s="";for(e of t)s+=e.toHTML();return s}static toReact(t){var e,s=[];for(e of t)s.push(e.toReact());return s}}return{Parser:r,Tag:e,Table:class extends e{constructor(){super(/```([\s\S]*?)```/g,!0);const t=new r,e=new r;t.register(new Line),e.register(new Comment),e.register(new String),e.register(new Keyword),e.register(new Function),e.register(new Number),this.lineParser=t,this.codeParser=e}toHTML(){return`<div class="code">${r.toHTML(this.children)}</div>`}toReact(){return t.createElement("table",{className:"code"},r.toReact(this.children).map((e,s)=>t.createElement("tr",null,t.createElement("td",{className:"code-num"},s),e)))}afterMatch(){const t=this.content,e=this.lineParser.parse(t.slice(3,t.length-3));var s;for(s of(e.shift(),e))s.children.push(...this.codeParser.parse(s.content));this.children=e}},Line:class extends e{constructor(){super(/.*/g,!0)}toHTML(){return`<td>${Parser.toHTML(this.children)}</td>`}toReact(){return t.createElement("td",null,Parser.toReact(this.children))}afterMatch(){this.end++}},Comment:class extends e{constructor(){super(/\/\/.*|\/\*[\s\S]*\*\//g,!0)}toHTML(){return`<span class="code-c">${this.content}</span>`}toReact(){return t.createElement("span",{className:"code-c"},this.content)}},String:class extends e{constructor(){super(/[`"'][\s\S].+['"`]/g,!0)}toHTML(){return`<span class="code-s">${this.content}</span>`}toReact(){return t.createElement("span",{className:"code-s"},this.content)}},Keyword:class extends e{constructor(){super(/\b(import|from|export|class|extends|async|await|if|switch|case|for|while|of|in|break|continue|const|var|let|new|return)\b|\.\.\.|[+=<>&|!]/g,!0)}toHTML(){return`<span class="code-k">${this.content}</span>`}toReact(){return t.createElement("span",{className:"code-k"},this.content)}},Function:class extends e{constructor(){super(/\w+(?=\()/g,!0)}toHTML(){return`<span class="code-f">${this.content}</span>`}toReact(){return t.createElement("span",{className:"code-f"},this.content)}},Number:class extends e{constructor(){super(/[0-9]+/g,!0)}toHTML(){return`<span class="code-c1">${this.content}</span>`}toReact(){return t.createElement("span",{className:"code-c1"},this.content)}},Spacer:class extends e{constructor(){super(/^-{3}$/gm,!0)}toHTML(){return"<hr>"}toReact(){return t.createElement("hr",null)}},Title:class extends e{constructor(){super(/^#(.+)$/gm,!0)}toHTML(){return`<h1 class="mark-title">${this.content}</h1>`}toReact(){return t.createElement("h1",{className:"mark-title"},this.content)}},Link:class extends e{constructor(){super(/(http|https):\/\/([\S]+)/g,!0)}toHTML(){return`<a href="${this.content}">${this.content}</a>`}toReact(){return t.createElement("a",{href:this.content},this.content)}},Text:s,Bold:class extends e{constructor(){super(/\*{2}(\*?[\s\S]*?\*?)\*{2}/g,!1)}toHTML(){return`<b>${r.toHTML(this.children)}</b>`}toReact(){return t.createElement("b",null,r.toReact(this.children))}},Italic:class extends e{constructor(){super(/\*([\s\S]*?)\*/g,!1)}toHTML(){return`<i>${r.toHTML(this.children)}</i>`}toReact(){return t.createElement("i",null,r.toReact(this.children))}},Underline:class extends e{constructor(){super(/_{2}([\s\S]*?)_{2}/g,!1)}toHTML(){return`<u>${r.toHTML(this.children)}</u>`}toReact(){return t.createElement("u",null,r.toReact(this.children))}},Strike:class extends e{constructor(){super(/~{2}([\s\S]*?)~{2}/g,!1)}toHTML(){return`<s>${r.toHTML(this.children)}</s>`}toReact(){return t.createElement("s",null,r.toReact(this.children))}}}});
